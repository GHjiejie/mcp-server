# MCP 服务器提示模板和工作流指南

本指南介绍如何使用 MCP 服务器中的可复用提示模板和工作流。

## 目录

1. [提示模板概述](#提示模板概述)
2. [可用的提示模板](#可用的提示模板)
3. [工作流概述](#工作流概述)
4. [可用的工作流](#可用的工作流)
5. [如何使用](#如何使用)
6. [创建自定义模板](#创建自定义模板)

---

## 提示模板概述

提示模板是预定义的结构化提示，可以帮助您系统化地完成各种开发任务。每个模板都接受特定的参数，并返回详细的指导内容。

### 模板优势

- **标准化流程**：确保每次都遵循最佳实践
- **提高效率**：减少重复性思考工作
- **知识共享**：团队成员可以使用统一的方法论
- **持续改进**：模板可以随着经验积累不断优化

---

## 可用的提示模板

### 1. code-review（代码审查）

帮助进行系统化的代码审查。

**参数：**
- `language` (必填): 编程语言（如：TypeScript、Python、Go等）
- `focus` (可选): 审查重点（如：性能、安全性、可维护性等）

**使用场景：**
- Pull Request 审查
- 代码质量检查
- 安全漏洞排查
- 性能问题识别

**示例：**
```json
{
  "language": "TypeScript",
  "focus": "性能"
}
```

**输出包含：**
- 代码质量检查清单
- 性能优化建议
- 安全性审查要点
- 可维护性评估标准
- 错误处理检查

---

### 2. doc-generation（文档生成）

用于生成项目文档、API文档等。

**参数：**
- `docType` (必填): 文档类型（API、README、使用指南等）
- `projectName` (可选): 项目名称

**使用场景：**
- 创建 README 文件
- 编写 API 文档
- 生成使用指南
- 编写技术文档

**支持的文档类型：**
- **API**: REST API 文档模板
- **README**: 项目说明文档
- **使用指南**: 详细的使用说明

**示例：**
```json
{
  "docType": "API",
  "projectName": "my-mcp-server"
}
```

**输出包含：**
- 文档结构模板
- 填写指南
- 最佳实践建议
- 示例内容

---

### 3. debug-help（调试帮助）

提供系统化的调试方法。

**参数：**
- `errorType` (必填): 错误类型（运行时错误、逻辑错误、性能问题等）
- `language` (可选): 编程语言

**使用场景：**
- 问题排查
- Bug 修复
- 性能优化
- 错误诊断

**错误类型：**
- 运行时错误
- 逻辑错误
- 性能问题
- 资源泄漏

**示例：**
```json
{
  "errorType": "运行时错误",
  "language": "TypeScript"
}
```

**输出包含：**
- 调试步骤清单
- 问题复现方法
- 信息收集指南
- 根因分析技巧
- 调试工具推荐

---

### 4. test-generation（测试用例生成）

帮助编写完整的测试用例。

**参数：**
- `testType` (必填): 测试类型（单元测试、集成测试、端到端测试）
- `framework` (可选): 测试框架（Jest、Mocha、Pytest等）

**使用场景：**
- 编写单元测试
- 创建集成测试
- 设计测试策略
- 提高测试覆盖率

**测试类型：**
- 单元测试
- 集成测试
- 端到端测试
- 性能测试

**示例：**
```json
{
  "testType": "单元测试",
  "framework": "Jest"
}
```

**输出包含：**
- 测试用例结构模板
- 测试场景清单
- Mock 使用指南
- 断言示例
- 测试最佳实践

---

### 5. refactoring（重构建议）

提供代码重构的系统方法。

**参数：**
- `focus` (可选): 重构重点（性能优化、可读性提升、架构改进等）

**使用场景：**
- 代码优化
- 技术债务清理
- 架构改进
- 性能提升

**重构类型：**
- 提取方法
- 引入参数对象
- 替换条件表达式
- 引入策略模式

**示例：**
```json
{
  "focus": "性能优化"
}
```

**输出包含：**
- 重构原则
- 常见重构场景
- 重构前后对比
- 重构步骤清单
- 重构检查清单

---

## 工作流概述

工作流是一系列有序的步骤，将多个提示模板、工具和资源组合在一起，形成完整的开发流程。

### 工作流优势

- **流程标准化**：确保团队遵循统一的工作流程
- **步骤明确**：清晰的步骤指导，不遗漏重要环节
- **工具集成**：自动关联相关的工具和资源
- **可追踪性**：便于跟踪项目进度和质量

---

## 可用的工作流

### 1. development-workflow（开发工作流）

标准开发工作流程，从需求到部署的完整流程。

**步骤：**
1. **需求分析** - 分析和明确功能需求
2. **设计方案** - 设计技术方案和架构
3. **编码实现** - 实现功能代码
4. **测试验证** - 编写和执行测试用例
5. **代码审查** - 进行代码审查和优化
6. **文档编写** - 编写相关文档
7. **部署上线** - 部署到生产环境

**适用场景：**
- 新功能开发
- 项目初始化
- 完整开发周期

**标签：** 开发、全流程

---

### 2. code-review-workflow（代码审查工作流）

系统化的代码审查流程。

**步骤：**
1. **审查准备** - 了解变更内容和背景
2. **代码质量审查** - 检查代码质量和规范
3. **功能验证** - 验证功能实现是否正确
4. **性能检查** - 检查性能和资源使用
5. **安全审查** - 检查安全隐患
6. **反馈建议** - 提供改进建议

**适用场景：**
- Pull Request 审查
- 代码质量检查
- 团队协作

**标签：** 代码审查、质量保证  
**预估时间：** 30分钟 - 2小时

---

### 3. debug-workflow（问题调试工作流）

系统化的问题调试流程。

**步骤：**
1. **问题复现** - 复现并记录问题
2. **信息收集** - 收集相关日志和环境信息
3. **问题分析** - 分析问题根本原因
4. **问题修复** - 实施修复方案
5. **验证修复** - 验证问题是否解决
6. **预防措施** - 添加预防措施

**适用场景：**
- Bug 修复
- 问题排查
- 故障诊断

**标签：** 调试、问题修复  
**预估时间：** 根据问题复杂度而定

---

### 4. refactoring-workflow（重构工作流）

安全的代码重构流程。

**步骤：**
1. **识别问题** - 识别需要重构的代码
2. **测试准备** - 确保有足够的测试覆盖
3. **制定计划** - 制定重构计划
4. **执行重构** - 小步进行重构
5. **测试验证** - 运行测试确保功能不变
6. **审查确认** - 代码审查确认改进效果

**适用场景：**
- 代码优化
- 技术债务清理
- 性能改进

**标签：** 重构、代码改进  
**预估时间：** 根据重构范围而定

---

### 5. feature-development-workflow（功能开发工作流）

敏捷功能开发流程。

**步骤：**
1. **用户故事** - 明确用户需求和验收标准
2. **任务拆分** - 将功能拆分为小任务
3. **测试驱动开发** - 先写测试，再写实现
4. **功能实现** - 实现功能代码
5. **集成测试** - 进行集成测试
6. **功能演示** - 向团队演示功能
7. **回顾总结** - 总结经验教训

**适用场景：**
- 敏捷开发
- Sprint 开发
- TDD 实践

**标签：** 敏捷、功能开发、TDD  
**预估时间：** 1-2周（一个Sprint）

---

### 6. api-development-workflow（API开发工作流）

API开发的标准流程。

**步骤：**
1. **API设计** - 设计API接口规范
2. **契约定义** - 定义请求和响应格式
3. **Mock实现** - 创建Mock服务
4. **API实现** - 实现真实的API
5. **API测试** - 编写和执行API测试
6. **API文档** - 编写API文档
7. **版本管理** - 处理API版本

**适用场景：**
- RESTful API 开发
- GraphQL API 开发
- 微服务开发

**标签：** API、后端开发  
**预估时间：** 根据API复杂度而定

---

## 如何使用

### 使用提示模板

在 MCP 客户端中调用提示模板：

```javascript
// 使用代码审查模板
const result = await client.getPrompt("code-review", {
  language: "TypeScript",
  focus: "性能"
});

// 使用文档生成模板
const docResult = await client.getPrompt("doc-generation", {
  docType: "API",
  projectName: "my-project"
});

// 使用调试帮助模板
const debugResult = await client.getPrompt("debug-help", {
  errorType: "运行时错误",
  language: "JavaScript"
});
```

### 使用工作流

工作流当前以元数据形式提供，用于指导开发流程。您可以：

1. **参考工作流步骤**：按照预定义的步骤执行任务
2. **使用关联的提示模板**：每个步骤关联了相应的提示模板
3. **调用相关工具**：使用工作流中推荐的工具
4. **访问相关资源**：获取工作流中需要的资源

**示例：遵循代码审查工作流**

```javascript
// 1. 审查准备
// 了解变更内容...

// 2. 代码质量审查
const reviewPrompt = await client.getPrompt("code-review", {
  language: "TypeScript",
  focus: "综合"
});

// 3. 功能验证
const testPrompt = await client.getPrompt("test-generation", {
  testType: "单元测试",
  framework: "Jest"
});

// ... 继续其他步骤
```

---

## 创建自定义模板

### 创建新的提示模板

1. **定义模板**：在 `src/server/prompts/templates.ts` 中添加新模板

```typescript
export const myCustomPrompt: PromptDefinition = {
  name: "my-custom-prompt",
  description: "我的自定义提示模板",
  argsSchema: {
    param1: z.string().describe("参数1描述"),
    param2: z.number().optional().describe("参数2描述"),
  },
  handler: async (args) => {
    const { param1, param2 = 0 } = args;
    
    return {
      messages: [
        {
          role: "user",
          content: {
            type: "text",
            text: `# 自定义提示内容\n\n参数1: ${param1}\n参数2: ${param2}`,
          },
        },
      ],
    };
  },
};
```

2. **注册模板**：在 `src/server/prompts/index.ts` 中导出

```typescript
import { myCustomPrompt } from "./templates.js";

export const prompts: PromptDefinition[] = [
  // ... 其他模板
  myCustomPrompt,
];
```

3. **重新编译**：运行 `npm run build`

### 创建新的工作流

1. **定义工作流**：在 `src/server/prompts/workflows.ts` 中添加

```typescript
export const myCustomWorkflow: WorkflowDefinition = {
  name: "my-custom-workflow",
  description: "我的自定义工作流",
  steps: [
    {
      id: "step1",
      name: "步骤1",
      description: "步骤1的描述",
      prompts: ["code-review"],
      tools: ["add"],
      resources: ["backend"],
    },
    // ... 更多步骤
  ],
  metadata: {
    tags: ["自定义", "工作流"],
    category: "开发流程",
    estimatedTime: "1小时",
  },
};
```

2. **导出工作流**：

```typescript
export const workflows: WorkflowDefinition[] = [
  // ... 其他工作流
  myCustomWorkflow,
];
```

---

## 最佳实践

### 提示模板最佳实践

1. **参数设计**
   - 保持参数简洁明了
   - 提供清晰的参数描述
   - 合理使用可选参数

2. **内容组织**
   - 使用 Markdown 格式
   - 添加清晰的标题和章节
   - 包含具体的示例

3. **实用性**
   - 提供可操作的检查清单
   - 包含具体的代码示例
   - 给出明确的指导建议

### 工作流最佳实践

1. **步骤设计**
   - 保持步骤的原子性
   - 确保步骤之间的逻辑性
   - 提供清晰的步骤描述

2. **资源关联**
   - 关联相关的提示模板
   - 指定需要的工具
   - 标记需要的资源

3. **元数据管理**
   - 添加有意义的标签
   - 指定工作流分类
   - 估算所需时间

---

## 总结

本 MCP 服务器提供了丰富的提示模板和工作流，涵盖了软件开发的各个环节：

- **5个提示模板**：代码审查、文档生成、调试帮助、测试生成、重构建议
- **6个工作流**：开发流程、代码审查、问题调试、代码重构、功能开发、API开发

这些模板和工作流可以帮助您：
- 提高开发效率
- 保证代码质量
- 标准化团队流程
- 积累最佳实践

您可以直接使用这些模板，也可以根据团队需求创建自定义的模板和工作流。

---

## 反馈和贡献

如果您有任何建议或想要贡献新的模板，欢迎：
- 提交 Issue
- 创建 Pull Request
- 分享您的使用经验

让我们一起完善这个工具，提高开发效率！
